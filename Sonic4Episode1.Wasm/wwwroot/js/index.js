import{dotnet as t}from"../_framework/dotnet.js";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var n={},i={};Object.defineProperty(i,"__esModule",{value:!0});var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},s=[],a=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,u=!1;function c(){u=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)s[e]=t[e],a[t.charCodeAt(e)]=e;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}function f(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(s[(i=n)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}function l(t){var e;u||c();for(var r=t.length,n=r%3,i="",o=[],a=16383,h=0,l=r-n;h<l;h+=a)o.push(f(t,h,h+a>l?l:h+a));return 1===n?(e=t[r-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),o.push(i),o.join("")}function p(t,e,r,n,i){var o,s,a=8*i-n-1,h=(1<<a)-1,u=h>>1,c=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+f],f+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+f],f+=l,c-=8);if(0===o)o=1-u;else{if(o===h)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)}function d(t,e,r,n,i,o){var s,a,h,u=8*o-i-1,c=(1<<u)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+f>=1?l/h:l*Math.pow(2,1-f))*h>=2&&(s++,h/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*h-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+p]=255&s,p+=d,s/=256,u-=8);t[r+p-d]|=128*y}var y={}.toString,g=Array.isArray||function(t){return"[object Array]"==y.call(t)};function w(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function v(t,e){if(w()<e)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=b.prototype:(null===t&&(t=new b(e)),t.length=e),t}function b(t,e,r){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return E(this,t)}return m(this,t,e,r)}function m(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);b.TYPED_ARRAY_SUPPORT?(t=e).__proto__=b.prototype:t=U(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!b.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(e,r);t=v(t,n);var i=t.write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(A(e)){var r=0|I(e.length);return 0===(t=v(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?v(t,0):U(t,e);if("Buffer"===e.type&&g(e.data))return U(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function S(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function E(t,e){if(S(e),t=v(t,e<0?0:0|I(e)),!b.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function U(t,e){var r=e.length<0?0:0|I(e.length);t=v(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function I(t){if(t>=w())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w().toString(16)+" bytes");return 0|t}function A(t){return!(null==t||!t._isBuffer)}function _(t,e){if(A(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return tt(t).length;default:if(n)return J(t).length;e=(""+e).toLowerCase(),n=!0}}function B(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Y(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return j(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return z(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function T(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=b.from(e,n)),A(e))return 0===e.length?-1:P(t,e,r,n,i);if("number"==typeof e)return e&=255,b.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):P(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function P(t,e,r,n,i){var o,s=1,a=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,h/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===h)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+h>a&&(r=a-h),o=r;o>=0;o--){for(var f=!0,l=0;l<h;l++)if(u(t,o+l)!==u(e,l)){f=!1;break}if(f)return o}return-1}function O(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function L(t,e,r,n){return et(J(e,t.length-r),t,r,n)}function R(t,e,r,n){return et(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function D(t,e,r,n){return R(t,e,r,n)}function M(t,e,r,n){return et(tt(e),t,r,n)}function k(t,e,r,n){return et(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function z(t,e,r){return 0===e&&r===t.length?l(t):l(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,h,u=t[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(h=(31&u)<<6|63&o)>127&&(c=h);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(h=(15&u)<<12|(63&o)<<6|63&s)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(h=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&h<1114112&&(c=h)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(t){var e=t.length;if(e<=F)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=F));return r}(n)}b.TYPED_ARRAY_SUPPORT=void 0===o.TYPED_ARRAY_SUPPORT||o.TYPED_ARRAY_SUPPORT,w(),b.poolSize=8192,b._augment=function(t){return t.__proto__=b.prototype,t},b.from=function(t,e,r){return m(null,t,e,r)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&b[Symbol.species]),b.alloc=function(t,e,r){return function(t,e,r,n){return S(e),e<=0?v(t,e):void 0!==r?"string"==typeof n?v(t,e).fill(r,n):v(t,e).fill(r):v(t,e)}(null,t,e,r)},b.allocUnsafe=function(t){return E(null,t)},b.allocUnsafeSlow=function(t){return E(null,t)},b.isBuffer=function(t){return null!=t&&(!!t._isBuffer||rt(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&rt(t.slice(0,0))}(t))},b.compare=function(t,e){if(!A(t)||!A(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(t,e){if(!g(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return b.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=b.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!A(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},b.byteLength=_,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},b.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},b.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},b.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):B.apply(this,arguments)},b.prototype.equals=function(t){if(!A(t))throw new TypeError("Argument must be a Buffer");return this===t||0===b.compare(this,t)},b.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},b.prototype.compare=function(t,e,r,n,i){if(!A(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(n,i),u=t.slice(e,r),c=0;c<a;++c)if(h[c]!==u[c]){o=h[c],s=u[c];break}return o<s?-1:s<o?1:0},b.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},b.prototype.indexOf=function(t,e,r){return T(this,t,e,r,!0)},b.prototype.lastIndexOf=function(t,e,r){return T(this,t,e,r,!1)},b.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return O(this,t,e,r);case"utf8":case"utf-8":return L(this,t,e,r);case"ascii":return R(this,t,e,r);case"latin1":case"binary":return D(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function j(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Y(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=Q(t[o]);return i}function V(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function Z(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function W(t,e,r,n,i,o){if(!A(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function H(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function $(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function G(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(t,e,r,n,i){return i||G(t,0,r,4),d(t,e,r,n,23,4),r+4}function q(t,e,r,n,i){return i||G(t,0,r,8),d(t,e,r,n,52,8),r+8}b.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),b.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=b.prototype;else{var i=e-t;r=new b(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},b.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Z(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},b.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Z(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},b.prototype.readUInt8=function(t,e){return e||Z(t,1,this.length),this[t]},b.prototype.readUInt16LE=function(t,e){return e||Z(t,2,this.length),this[t]|this[t+1]<<8},b.prototype.readUInt16BE=function(t,e){return e||Z(t,2,this.length),this[t]<<8|this[t+1]},b.prototype.readUInt32LE=function(t,e){return e||Z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},b.prototype.readUInt32BE=function(t,e){return e||Z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},b.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Z(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},b.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Z(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},b.prototype.readInt8=function(t,e){return e||Z(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},b.prototype.readInt16LE=function(t,e){e||Z(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt16BE=function(t,e){e||Z(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt32LE=function(t,e){return e||Z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},b.prototype.readInt32BE=function(t,e){return e||Z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},b.prototype.readFloatLE=function(t,e){return e||Z(t,4,this.length),p(this,t,!0,23,4)},b.prototype.readFloatBE=function(t,e){return e||Z(t,4,this.length),p(this,t,!1,23,4)},b.prototype.readDoubleLE=function(t,e){return e||Z(t,8,this.length),p(this,t,!0,52,8)},b.prototype.readDoubleBE=function(t,e){return e||Z(t,8,this.length),p(this,t,!1,52,8)},b.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||W(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},b.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||W(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},b.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},b.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):H(this,t,e,!0),e+2},b.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):H(this,t,e,!1),e+2},b.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):$(this,t,e,!0),e+4},b.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},b.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);W(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},b.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);W(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},b.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},b.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):H(this,t,e,!0),e+2},b.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):H(this,t,e,!1),e+2},b.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):$(this,t,e,!0),e+4},b.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||W(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},b.prototype.writeFloatLE=function(t,e,r){return K(this,t,e,!0,r)},b.prototype.writeFloatBE=function(t,e,r){return K(this,t,e,!1,r)},b.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},b.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},b.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!b.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},b.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!b.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=A(t)?t:J(new b(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var X=/[^+\/0-9A-Za-z-_]/g;function Q(t){return t<16?"0"+t.toString(16):t.toString(16)}function J(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function tt(t){return function(t){var e,r,n,i,o,s;u||c();var f=t.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[f-2]?2:"="===t[f-1]?1:0,s=new h(3*f/4-o),n=o>0?f-4:f;var l=0;for(e=0,r=0;e<n;e+=4,r+=3)i=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,s[l++]=255&i):1===o&&(i=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(X,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function et(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function rt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var nt={};var it=new TextEncoder;function ot(t,e,r){t.length>50?function(t,e,r){it.encodeInto(t,e.subarray(r))}(t,e,r):function(t,e,r){for(var n=t.length,i=r,o=0;o<n;){var s=t.charCodeAt(o++);if(0!=(4294967168&s)){if(0==(4294965248&s))e[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<n){var a=t.charCodeAt(o);56320==(64512&a)&&(++o,s=((1023&s)<<10)+(1023&a)+65536)}0==(4294901760&s)?(e[i++]=s>>12&15|224,e[i++]=s>>6&63|128):(e[i++]=s>>18&7|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128)}e[i++]=63&s|128}else e[i++]=s}}(t,e,r)}var st=4096;function at(t,e,r){for(var n=e,i=n+r,o=[],s="";n<i;){var a=t[n++];if(0==(128&a))o.push(a);else if(192==(224&a)){var h=63&t[n++];o.push((31&a)<<6|h)}else if(224==(240&a)){h=63&t[n++];var u=63&t[n++];o.push((31&a)<<12|h<<6|u)}else if(240==(248&a)){var c=(7&a)<<18|(h=63&t[n++])<<12|(u=63&t[n++])<<6|63&t[n++];c>65535&&(c-=65536,o.push(c>>>10&1023|55296),c=56320|1023&c),o.push(c)}else o.push(a);o.length>=st&&(s+=String.fromCharCode.apply(String,o),o.length=0)}return o.length>0&&(s+=String.fromCharCode.apply(String,o)),s}var ht=new TextDecoder;function ut(t,e,r){return r>200?function(t,e,r){var n=t.subarray(e,e+r);return ht.decode(n)}(t,e,r):at(t,e,r)}var ct,ft=function(t,e){this.type=t,this.data=e},lt=(ct=function(t,e){return ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},ct(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ct(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),pt=function(t){function e(r){var n=t.call(this,r)||this,i=Object.create(e.prototype);return Object.setPrototypeOf(n,i),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:e.name}),n}return lt(e,t),e}(Error),dt=4294967295;function yt(t,e,r){var n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}function gt(t,e){return 4294967296*t.getInt32(e)+t.getUint32(e+4)}var wt=4294967295,vt=17179869183;function bt(t){var e=t.sec,r=t.nsec;if(e>=0&&r>=0&&e<=vt){if(0===r&&e<=wt){var n=new Uint8Array(4);return(s=new DataView(n.buffer)).setUint32(0,e),n}var i=e/4294967296,o=4294967295&e;n=new Uint8Array(8);return(s=new DataView(n.buffer)).setUint32(0,r<<2|3&i),s.setUint32(4,o),n}var s;n=new Uint8Array(12);return(s=new DataView(n.buffer)).setUint32(0,r),yt(s,4,e),n}function mt(t){var e=t.getTime(),r=Math.floor(e/1e3),n=1e6*(e-1e3*r),i=Math.floor(n/1e9);return{sec:r+i,nsec:n-1e9*i}}function St(t){return t instanceof Date?bt(mt(t)):null}function Et(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:var r=e.getUint32(0);return{sec:4294967296*(3&r)+e.getUint32(4),nsec:r>>>2};case 12:return{sec:gt(e,4),nsec:e.getUint32(0)};default:throw new pt("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(t.length))}}function Ut(t){var e=Et(t);return new Date(1e3*e.sec+e.nsec/1e6)}var It={type:-1,encode:St,decode:Ut},At=function(){function t(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(It)}return t.prototype.register=function(t){var e=t.type,r=t.encode,n=t.decode;if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{var i=1+e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}},t.prototype.tryToEncode=function(t,e){for(var r=0;r<this.builtInEncoders.length;r++){if(null!=(n=this.builtInEncoders[r]))if(null!=(i=n(t,e)))return new ft(-1-r,i)}for(r=0;r<this.encoders.length;r++){var n,i;if(null!=(n=this.encoders[r]))if(null!=(i=n(t,e)))return new ft(r,i)}return t instanceof ft?t:null},t.prototype.decode=function(t,e,r){var n=e<0?this.builtInDecoders[-1-e]:this.decoders[e];return n?n(t,e,r):new ft(e,t)},t.defaultCodec=new t,t}();function _t(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}var Bt=function(){function t(t){var e,r,n,i,o,s,a,h;this.extensionCodec=null!==(e=null==t?void 0:t.extensionCodec)&&void 0!==e?e:At.defaultCodec,this.context=null==t?void 0:t.context,this.useBigInt64=null!==(r=null==t?void 0:t.useBigInt64)&&void 0!==r&&r,this.maxDepth=null!==(n=null==t?void 0:t.maxDepth)&&void 0!==n?n:100,this.initialBufferSize=null!==(i=null==t?void 0:t.initialBufferSize)&&void 0!==i?i:2048,this.sortKeys=null!==(o=null==t?void 0:t.sortKeys)&&void 0!==o&&o,this.forceFloat32=null!==(s=null==t?void 0:t.forceFloat32)&&void 0!==s&&s,this.ignoreUndefined=null!==(a=null==t?void 0:t.ignoreUndefined)&&void 0!==a&&a,this.forceIntegerToFloat=null!==(h=null==t?void 0:t.forceIntegerToFloat)&&void 0!==h&&h,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encodeSharedRef=function(t){return this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)},t.prototype.encode=function(t){return this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)},t.prototype.doEncode=function(t,e){if(e>this.maxDepth)throw new Error("Too deep objects in depth ".concat(e));null==t?this.encodeNil():"boolean"==typeof t?this.encodeBoolean(t):"number"==typeof t?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):"string"==typeof t?this.encodeString(t):this.useBigInt64&&"bigint"==typeof t?this.encodeBigInt64(t):this.encodeObject(t,e)},t.prototype.ensureBufferSizeToWrite=function(t){var e=this.pos+t;this.view.byteLength<e&&this.resizeBuffer(2*e)},t.prototype.resizeBuffer=function(t){var e=new ArrayBuffer(t),r=new Uint8Array(e),n=new DataView(e);r.set(this.bytes),this.view=n,this.bytes=r},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(t){!1===t?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)},t.prototype.encodeNumberAsFloat=function(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))},t.prototype.encodeBigInt64=function(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))},t.prototype.writeStringHeader=function(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too long string: ".concat(t," bytes in UTF-8"));this.writeU8(219),this.writeU32(t)}},t.prototype.encodeString=function(t){var e=function(t){for(var e=t.length,r=0,n=0;n<e;){var i=t.charCodeAt(n++);if(0!=(4294967168&i))if(0==(4294965248&i))r+=2;else{if(i>=55296&&i<=56319&&n<e){var o=t.charCodeAt(n);56320==(64512&o)&&(++n,i=((1023&i)<<10)+(1023&o)+65536)}r+=0==(4294901760&i)?3:4}else r++}return r}(t);this.ensureBufferSizeToWrite(5+e),this.writeStringHeader(e),ot(t,this.bytes,this.pos),this.pos+=e},t.prototype.encodeObject=function(t,e){var r=this.extensionCodec.tryToEncode(t,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,e);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else{if("object"!=typeof t)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(t)));this.encodeMap(t,e)}},t.prototype.encodeBinary=function(t){var e=t.byteLength;if(e<256)this.writeU8(196),this.writeU8(e);else if(e<65536)this.writeU8(197),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large binary: ".concat(e));this.writeU8(198),this.writeU32(e)}var r=_t(t);this.writeU8a(r)},t.prototype.encodeArray=function(t,e){var r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large array: ".concat(r));this.writeU8(221),this.writeU32(r)}for(var n=0,i=t;n<i.length;n++){var o=i[n];this.doEncode(o,e+1)}},t.prototype.countWithoutUndefined=function(t,e){for(var r=0,n=0,i=e;n<i.length;n++){void 0!==t[i[n]]&&r++}return r},t.prototype.encodeMap=function(t,e){var r=Object.keys(t);this.sortKeys&&r.sort();var n=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(n<16)this.writeU8(128+n);else if(n<65536)this.writeU8(222),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large map object: ".concat(n));this.writeU8(223),this.writeU32(n)}for(var i=0,o=r;i<o.length;i++){var s=o[i],a=t[s];this.ignoreUndefined&&void 0===a||(this.encodeString(s),this.doEncode(a,e+1))}},t.prototype.encodeExtension=function(t){var e=t.data.length;if(1===e)this.writeU8(212);else if(2===e)this.writeU8(213);else if(4===e)this.writeU8(214);else if(8===e)this.writeU8(215);else if(16===e)this.writeU8(216);else if(e<256)this.writeU8(199),this.writeU8(e);else if(e<65536)this.writeU8(200),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large extension object: ".concat(e));this.writeU8(201),this.writeU32(e)}this.writeI8(t.type),this.writeU8a(t.data)},t.prototype.writeU8=function(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++},t.prototype.writeU8a=function(t){var e=t.length;this.ensureBufferSizeToWrite(e),this.bytes.set(t,this.pos),this.pos+=e},t.prototype.writeI8=function(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++},t.prototype.writeU16=function(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2},t.prototype.writeI16=function(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2},t.prototype.writeU32=function(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4},t.prototype.writeI32=function(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4},t.prototype.writeF32=function(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4},t.prototype.writeF64=function(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8},t.prototype.writeU64=function(t){this.ensureBufferSizeToWrite(8),function(t,e,r){var n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}(this.view,this.pos,t),this.pos+=8},t.prototype.writeI64=function(t){this.ensureBufferSizeToWrite(8),yt(this.view,this.pos,t),this.pos+=8},t.prototype.writeBigUint64=function(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8},t.prototype.writeBigInt64=function(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8},t}();function xt(t){return"".concat(t<0?"-":"","0x").concat(Math.abs(t).toString(16).padStart(2,"0"))}var Tt=function(){function t(t,e){void 0===t&&(t=16),void 0===e&&(e=16),this.maxKeyLength=t,this.maxLengthPerKey=e,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return t.prototype.canBeCached=function(t){return t>0&&t<=this.maxKeyLength},t.prototype.find=function(t,e,r){t:for(var n=0,i=this.caches[r-1];n<i.length;n++){for(var o=i[n],s=o.bytes,a=0;a<r;a++)if(s[a]!==t[e+a])continue t;return o.str}return null},t.prototype.store=function(t,e){var r=this.caches[t.length-1],n={bytes:t,str:e};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=n:r.push(n)},t.prototype.decode=function(t,e,r){var n=this.find(t,e,r);if(null!=n)return this.hit++,n;this.miss++;var i=at(t,e,r),o=Uint8Array.prototype.slice.call(t,e,e+r);return this.store(o,i),i},t}(),Pt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))},Ot=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(h){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}},Lt=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}},Rt=function(t){return this instanceof Rt?(this.v=t,this):new Rt(t)},Dt=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=i[t](e)).value instanceof Rt?Promise.resolve(r.value.v).then(h,u):c(o[0][2],r)}catch(t){c(o[0][3],t)}var r}function h(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}},Mt="array",kt="map_key",zt=new DataView(new ArrayBuffer(0)),Ct=new Uint8Array(zt.buffer);try{zt.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var Ft=RangeError,jt=new Ft("Insufficient data"),Nt=new Tt,Yt=function(){function t(t){var e,r,n,i,o,s,a;this.totalPos=0,this.pos=0,this.view=zt,this.bytes=Ct,this.headByte=-1,this.stack=[],this.extensionCodec=null!==(e=null==t?void 0:t.extensionCodec)&&void 0!==e?e:At.defaultCodec,this.context=null==t?void 0:t.context,this.useBigInt64=null!==(r=null==t?void 0:t.useBigInt64)&&void 0!==r&&r,this.maxStrLength=null!==(n=null==t?void 0:t.maxStrLength)&&void 0!==n?n:dt,this.maxBinLength=null!==(i=null==t?void 0:t.maxBinLength)&&void 0!==i?i:dt,this.maxArrayLength=null!==(o=null==t?void 0:t.maxArrayLength)&&void 0!==o?o:dt,this.maxMapLength=null!==(s=null==t?void 0:t.maxMapLength)&&void 0!==s?s:dt,this.maxExtLength=null!==(a=null==t?void 0:t.maxExtLength)&&void 0!==a?a:dt,this.keyDecoder=void 0!==(null==t?void 0:t.keyDecoder)?t.keyDecoder:Nt}return t.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},t.prototype.setBuffer=function(t){this.bytes=_t(t),this.view=function(t){if(t instanceof ArrayBuffer)return new DataView(t);var e=_t(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}(this.bytes),this.pos=0},t.prototype.appendBuffer=function(t){if(-1!==this.headByte||this.hasRemaining(1)){var e=this.bytes.subarray(this.pos),r=_t(t),n=new Uint8Array(e.length+r.length);n.set(e),n.set(r,e.length),this.setBuffer(n)}else this.setBuffer(t)},t.prototype.hasRemaining=function(t){return this.view.byteLength-this.pos>=t},t.prototype.createExtraByteError=function(t){var e=this.view,r=this.pos;return new RangeError("Extra ".concat(e.byteLength-r," of ").concat(e.byteLength," byte(s) found at buffer[").concat(t,"]"))},t.prototype.decode=function(t){this.reinitializeState(),this.setBuffer(t);var e=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return e},t.prototype.decodeMulti=function(t){return Ot(this,(function(e){switch(e.label){case 0:this.reinitializeState(),this.setBuffer(t),e.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return e.sent(),[3,1];case 3:return[2]}}))},t.prototype.decodeAsync=function(t){var e,r,n,i,o,s,a;return Pt(this,void 0,void 0,(function(){var h,u,c,f,l,p,d,y;return Ot(this,(function(g){switch(g.label){case 0:h=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),e=!0,r=Lt(t),g.label=2;case 2:return[4,r.next()];case 3:if(n=g.sent(),i=n.done)return[3,5];a=n.value,e=!1;try{if(c=a,h)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{u=this.doDecodeSync(),h=!0}catch(t){if(!(t instanceof Ft))throw t}this.totalPos+=this.pos}finally{e=!0}g.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return f=g.sent(),o={error:f},[3,12];case 7:return g.trys.push([7,,10,11]),e||i||!(s=r.return)?[3,9]:[4,s.call(r)];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:if(h){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,u]}throw p=(l=this).headByte,d=l.pos,y=l.totalPos,new RangeError("Insufficient data in parsing ".concat(xt(p)," at ").concat(y," (").concat(d," in the current buffer)"))}}))}))},t.prototype.decodeArrayStream=function(t){return this.decodeMultiAsync(t,!0)},t.prototype.decodeStream=function(t){return this.decodeMultiAsync(t,!1)},t.prototype.decodeMultiAsync=function(t,e){return Dt(this,arguments,(function(){var r,n,i,o,s,a,h,u,c,f,l,p;return Ot(this,(function(d){switch(d.label){case 0:r=e,n=-1,d.label=1;case 1:d.trys.push([1,15,16,21]),i=!0,o=Lt(t),d.label=2;case 2:return[4,Rt(o.next())];case 3:if(s=d.sent(),c=s.done)return[3,14];p=s.value,i=!1,d.label=4;case 4:if(d.trys.push([4,,12,13]),a=p,e&&0===n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),r&&(n=this.readArraySize(),r=!1,this.complete()),d.label=5;case 5:d.trys.push([5,10,,11]),d.label=6;case 6:return[4,Rt(this.doDecodeSync())];case 7:return[4,d.sent()];case 8:return d.sent(),0==--n?[3,9]:[3,6];case 9:return[3,11];case 10:if(!((h=d.sent())instanceof Ft))throw h;return[3,11];case 11:return this.totalPos+=this.pos,[3,13];case 12:return i=!0,[7];case 13:return[3,2];case 14:return[3,21];case 15:return u=d.sent(),f={error:u},[3,21];case 16:return d.trys.push([16,,19,20]),i||c||!(l=o.return)?[3,18]:[4,Rt(l.call(o))];case 17:d.sent(),d.label=18;case 18:return[3,20];case 19:if(f)throw f.error;return[7];case 20:return[7];case 21:return[2]}}))}))},t.prototype.doDecodeSync=function(){t:for(;;){var t=this.readHeadByte(),e=void 0;if(t>=224)e=t-256;else if(t<192)if(t<128)e=t;else if(t<144){if(0!==(n=t-128)){this.pushMapState(n),this.complete();continue t}e={}}else if(t<160){if(0!==(n=t-144)){this.pushArrayState(n),this.complete();continue t}e=[]}else{var r=t-160;e=this.decodeUtf8String(r,0)}else if(192===t)e=null;else if(194===t)e=!1;else if(195===t)e=!0;else if(202===t)e=this.readF32();else if(203===t)e=this.readF64();else if(204===t)e=this.readU8();else if(205===t)e=this.readU16();else if(206===t)e=this.readU32();else if(207===t)e=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===t)e=this.readI8();else if(209===t)e=this.readI16();else if(210===t)e=this.readI32();else if(211===t)e=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===t){r=this.lookU8();e=this.decodeUtf8String(r,1)}else if(218===t){r=this.lookU16();e=this.decodeUtf8String(r,2)}else if(219===t){r=this.lookU32();e=this.decodeUtf8String(r,4)}else if(220===t){if(0!==(n=this.readU16())){this.pushArrayState(n),this.complete();continue t}e=[]}else if(221===t){if(0!==(n=this.readU32())){this.pushArrayState(n),this.complete();continue t}e=[]}else if(222===t){if(0!==(n=this.readU16())){this.pushMapState(n),this.complete();continue t}e={}}else if(223===t){if(0!==(n=this.readU32())){this.pushMapState(n),this.complete();continue t}e={}}else if(196===t){var n=this.lookU8();e=this.decodeBinary(n,1)}else if(197===t){n=this.lookU16();e=this.decodeBinary(n,2)}else if(198===t){n=this.lookU32();e=this.decodeBinary(n,4)}else if(212===t)e=this.decodeExtension(1,0);else if(213===t)e=this.decodeExtension(2,0);else if(214===t)e=this.decodeExtension(4,0);else if(215===t)e=this.decodeExtension(8,0);else if(216===t)e=this.decodeExtension(16,0);else if(199===t){n=this.lookU8();e=this.decodeExtension(n,1)}else if(200===t){n=this.lookU16();e=this.decodeExtension(n,2)}else{if(201!==t)throw new pt("Unrecognized type byte: ".concat(xt(t)));n=this.lookU32();e=this.decodeExtension(n,4)}this.complete();for(var i=this.stack;i.length>0;){var o=i[i.length-1];if(o.type===Mt){if(o.array[o.position]=e,o.position++,o.position!==o.size)continue t;i.pop(),e=o.array}else{if(o.type===kt){if("string"!=typeof(s=e)&&"number"!=typeof s)throw new pt("The type of key must be string or number but "+typeof e);if("__proto__"===e)throw new pt("The key __proto__ is not allowed");o.key=e,o.type="map_value";continue t}if(o.map[o.key]=e,o.readCount++,o.readCount!==o.size){o.key=null,o.type=kt;continue t}i.pop(),e=o.map}}return e}var s},t.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},t.prototype.complete=function(){this.headByte=-1},t.prototype.readArraySize=function(){var t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:if(t<160)return t-144;throw new pt("Unrecognized array type byte: ".concat(xt(t)))}},t.prototype.pushMapState=function(t){if(t>this.maxMapLength)throw new pt("Max length exceeded: map length (".concat(t,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:kt,size:t,key:null,readCount:0,map:{}})},t.prototype.pushArrayState=function(t){if(t>this.maxArrayLength)throw new pt("Max length exceeded: array length (".concat(t,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:Mt,size:t,array:new Array(t),position:0})},t.prototype.decodeUtf8String=function(t,e){var r;if(t>this.maxStrLength)throw new pt("Max length exceeded: UTF-8 byte length (".concat(t,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+e+t)throw jt;var n,i=this.pos+e;return n=this.stateIsMapKey()&&(null===(r=this.keyDecoder)||void 0===r?void 0:r.canBeCached(t))?this.keyDecoder.decode(this.bytes,i,t):ut(this.bytes,i,t),this.pos+=e+t,n},t.prototype.stateIsMapKey=function(){return this.stack.length>0&&this.stack[this.stack.length-1].type===kt},t.prototype.decodeBinary=function(t,e){if(t>this.maxBinLength)throw new pt("Max length exceeded: bin length (".concat(t,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(t+e))throw jt;var r=this.pos+e,n=this.bytes.subarray(r,r+t);return this.pos+=e+t,n},t.prototype.decodeExtension=function(t,e){if(t>this.maxExtLength)throw new pt("Max length exceeded: ext length (".concat(t,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+e),n=this.decodeBinary(t,e+1);return this.extensionCodec.decode(n,r,this.context)},t.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t.prototype.readU8=function(){var t=this.view.getUint8(this.pos);return this.pos++,t},t.prototype.readI8=function(){var t=this.view.getInt8(this.pos);return this.pos++,t},t.prototype.readU16=function(){var t=this.view.getUint16(this.pos);return this.pos+=2,t},t.prototype.readI16=function(){var t=this.view.getInt16(this.pos);return this.pos+=2,t},t.prototype.readU32=function(){var t=this.view.getUint32(this.pos);return this.pos+=4,t},t.prototype.readI32=function(){var t=this.view.getInt32(this.pos);return this.pos+=4,t},t.prototype.readU64=function(){var t,e,r=(t=this.view,e=this.pos,4294967296*t.getUint32(e)+t.getUint32(e+4));return this.pos+=8,r},t.prototype.readI64=function(){var t=gt(this.view,this.pos);return this.pos+=8,t},t.prototype.readU64AsBigInt=function(){var t=this.view.getBigUint64(this.pos);return this.pos+=8,t},t.prototype.readI64AsBigInt=function(){var t=this.view.getBigInt64(this.pos);return this.pos+=8,t},t.prototype.readF32=function(){var t=this.view.getFloat32(this.pos);return this.pos+=4,t},t.prototype.readF64=function(){var t=this.view.getFloat64(this.pos);return this.pos+=8,t},t}();var Vt=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(h){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}},Zt=function(t){return this instanceof Zt?(this.v=t,this):new Zt(t)},Wt=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=i[t](e)).value instanceof Zt?Promise.resolve(r.value.v).then(h,u):c(o[0][2],r)}catch(t){c(o[0][3],t)}var r}function h(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}};function Ht(t){return Wt(this,arguments,(function(){var e,r,n,i;return Vt(this,(function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Zt(e.read())];case 3:return r=o.sent(),n=r.done,i=r.value,n?[4,Zt(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return function(t){if(null==t)throw new Error("Assertion Failure: value must not be null nor undefined")}(i),[4,Zt(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function $t(t){return null!=t[Symbol.asyncIterator]?t:Ht(t)}var Gt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))},Kt=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(h){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}};var qt=r(Object.freeze({__proto__:null,DataViewIndexOutOfBoundsError:Ft,DecodeError:pt,Decoder:Yt,EXT_TIMESTAMP:-1,Encoder:Bt,ExtData:ft,ExtensionCodec:At,decode:function(t,e){return new Yt(e).decode(t)},decodeArrayStream:function(t,e){var r=$t(t);return new Yt(e).decodeArrayStream(r)},decodeAsync:function(t,e){return Gt(this,void 0,void 0,(function(){var r;return Kt(this,(function(n){return r=$t(t),[2,new Yt(e).decodeAsync(r)]}))}))},decodeMulti:function(t,e){return new Yt(e).decodeMulti(t)},decodeMultiStream:function(t,e){var r=$t(t);return new Yt(e).decodeStream(r)},decodeStream:undefined,decodeTimestampExtension:Ut,decodeTimestampToTimeSpec:Et,encode:function(t,e){return new Bt(e).encodeSharedRef(t)},encodeDateToTimeSpec:mt,encodeTimeSpecToTimestamp:bt,encodeTimestampExtension:St})),Xt={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createFromBuffer=t.createEmpty=t.alignInt=t.CAPACITY_READ_ONLY=t.PAYLOAD_UNIT=t.SIZE_DOUBLE=t.SIZE_FLOAT=t.SIZE_UINT64=t.SIZE_INT64=t.SIZE_UINT32=t.SIZE_INT32=void 0,t.SIZE_INT32=4,t.SIZE_UINT32=4,t.SIZE_INT64=8,t.SIZE_UINT64=8,t.SIZE_FLOAT=4,t.SIZE_DOUBLE=8,t.PAYLOAD_UNIT=64,t.CAPACITY_READ_ONLY=9007199254740992;t.alignInt=(t,e)=>t+(e-t%e)%e;class e{constructor(t){this.payload=t.header,this.payloadOffset=t.headerSize,this.readIndex=0,this.endIndex=t.getPayloadSize()}readBool(){return 0!==this.readInt()}readInt(){return this.readBytes(t.SIZE_INT32,b.prototype.readInt32LE)}readUInt32(){return this.readBytes(t.SIZE_UINT32,b.prototype.readUInt32LE)}readInt64(){throw new Error("Int64 not supported in the browser")}readUInt64(){throw new Error("UInt64 not supported in the browser")}readFloat(){return this.readBytes(t.SIZE_FLOAT,b.prototype.readFloatLE)}readDouble(){return this.readBytes(t.SIZE_DOUBLE,b.prototype.readDoubleLE)}readString(){return this.readBytes(this.readInt()).toString()}readBytes(t,e){var r=this.getReadPayloadOffsetAndAdvance(t);return null!=e?e.call(this.payload,r,t):this.payload.slice(r,r+t)}getReadPayloadOffsetAndAdvance(t){if(t>this.endIndex-this.readIndex)throw this.readIndex=this.endIndex,new Error("Failed to read data with length of "+t);var e=this.payloadOffset+this.readIndex;return this.advance(t),e}advance(e){var r=(0,t.alignInt)(e,t.SIZE_UINT32);this.endIndex-this.readIndex<r?this.readIndex=this.endIndex:this.readIndex+=r}}class r{constructor(e){e?(this.header=e,this.headerSize=e.length-this.getPayloadSize(),this.capacityAfterHeader=t.CAPACITY_READ_ONLY,this.writeOffset=0,this.headerSize>e.length&&(this.headerSize=0),this.headerSize!==(0,t.alignInt)(this.headerSize,t.SIZE_UINT32)&&(this.headerSize=0),0===this.headerSize&&(this.header=b.alloc(0))):(this.header=b.alloc(0),this.headerSize=t.SIZE_UINT32,this.capacityAfterHeader=0,this.writeOffset=0,this.resize(t.PAYLOAD_UNIT),this.setPayloadSize(0))}createIterator(){return new e(this)}toBuffer(){return this.header.slice(0,this.headerSize+this.getPayloadSize())}writeBool(t){return this.writeInt(t?1:0)}writeInt(e){return this.writeBytes(e,t.SIZE_INT32,b.prototype.writeInt32LE)}writeUInt32(e){return this.writeBytes(e,t.SIZE_UINT32,b.prototype.writeUInt32LE)}writeInt64(){throw new Error("Int64 not supported in the browser")}writeUInt64(){throw new Error("UInt64 not supported in the browser")}writeFloat(e){return this.writeBytes(e,t.SIZE_FLOAT,b.prototype.writeFloatLE)}writeDouble(e){return this.writeBytes(e,t.SIZE_DOUBLE,b.prototype.writeDoubleLE)}writeString(t){var e=b.byteLength(t,"utf8");return!!this.writeInt(e)&&this.writeBytes(t,e)}setPayloadSize(t){return this.header.writeUInt32LE(t,0)}getPayloadSize(){return this.header.readUInt32LE(0)}writeBytes(e,r,n){var i=(0,t.alignInt)(r,t.SIZE_UINT32),o=this.writeOffset+i;if(o>this.capacityAfterHeader&&this.resize(Math.max(2*this.capacityAfterHeader,o)),null!=n)n.call(this.header,e,this.headerSize+this.writeOffset);else if(e instanceof Uint8Array)for(var s=0;s<i;s++)this.header[this.headerSize+this.writeOffset+s]=e[s];else this.header.write(e,this.headerSize+this.writeOffset,r);var a=this.headerSize+this.writeOffset+r;return this.header.fill(0,a,a+i-r),this.setPayloadSize(o),this.writeOffset=o,!0}resize(e){e=(0,t.alignInt)(e,t.PAYLOAD_UNIT),this.header=b.concat([this.header,b.alloc(e)]),this.capacityAfterHeader=e}}t.default=r;t.createEmpty=()=>new r;t.createFromBuffer=t=>new r(t)}(Xt);var Qt={};function Jt(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isDirectoryMetadata=t.isDirectory=void 0;t.isDirectory=t=>!!t&&!(t instanceof ArrayBuffer||"length"in t&&"number"==typeof t.length)&&"object"==typeof t&&!Array.isArray(t);t.isDirectoryMetadata=e=>(0,t.isDirectory)(e)&&(0,t.isDirectory)(e.files)}(Qt);var te=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ee=function(t){return te.exec(t).slice(1)};function re(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return(e?"/":"")+(t=Jt(fe(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function ne(t){var e=ie(t),r="/"===le(t,-1);return(t=Jt(fe(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function ie(t){return"/"===t.charAt(0)}function oe(){return ne(fe(Array.prototype.slice.call(arguments,0),(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))}function se(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=re(t).substr(1),e=re(e).substr(1);for(var n=r(t.split("/")),i=r(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}var h=[];for(a=s;a<n.length;a++)h.push("..");return(h=h.concat(i.slice(s))).join("/")}function ae(t){var e=ee(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."}function he(t,e){var r=ee(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r}function ue(t){return ee(t)[3]}var ce={extname:ue,basename:he,dirname:ae,sep:"/",delimiter:":",relative:se,join:oe,isAbsolute:ie,normalize:ne,resolve:re};function fe(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var le="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)},pe=r(Object.freeze({__proto__:null,basename:he,default:ce,delimiter:":",dirname:ae,extname:ue,isAbsolute:ie,join:oe,normalize:ne,relative:se,resolve:re,sep:"/"}));Object.defineProperty(nt,"__esModule",{value:!0}),nt.createPackage=void 0;const de=Xt,ye=Qt,ge=pe,we=new qt.Encoder,ve=t=>{const e={files:{}};for(const[r,n]of Object.entries(t))(0,ye.isDirectory)(n)?e.files[r]=ve(n):e.files[r]=n;return e},be=t=>{let e={files:{}};for(const[r,n]of Object.entries(t.files))(0,ye.isDirectoryMetadata)(n)?e.files[r]=be(n):e.files[r]=[0,null==n?void 0:n.length];return e},me=t=>(t=>{const e=(t,r)=>{for(const[n,i]of Object.entries(t.files))if((0,ye.isDirectoryMetadata)(i)){const[o,s]=e(i,r);t.files[n]=o,r=s}else t.files[n]=[r,i[1]||0],r+=i[1]||0;return[t,r]};return e(t,0)[0]})(be(ve(t))),Se=t=>Object.entries(t).reduce(((t,[,e])=>[...t,...(0,ye.isDirectory)(e)?Se(e):[b.from(e)]]),[]);nt.createPackage=async(t,{flat:e=!1}={})=>{const r=me(e?(t=>{var e;const r={};for(const[n,i]of Object.entries(t)){let t=r;const o=n.split(ge.sep).filter(Boolean),s=o.pop();for(const r of o)t=t[r]=null!==(e=t[r])&&void 0!==e?e:{};t[s]=i}return r})(t):t),n=(0,de.createEmpty)(),i=we.encode(r);n.writeInt(i.length),n.writeBytes(i,i.length);const o=n.toBuffer(),s=(0,de.createEmpty)();s.writeUInt32(o.length);const a=s.toBuffer();return b.concat([a,o,...Se(t)])};var Ee,Ue,Ie,Ae={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extractAll=t.getHeader=t.extractFile=t.readArchiveHeaderSync=void 0;const e=Qt,r=pe,n=new qt.Decoder,i=({basePath:t,metadata:n,filesOffset:o})=>Object.entries(n.files).flatMap((([s,a])=>(0,e.isDirectoryMetadata)(a)?i({basePath:r.join(t,s),metadata:a,filesOffset:o}):{path:r.join(t,s),offset:Number(n.files[s][0]),size:n.files[s][1],fileOffset:o+8+Number(n.files[s][0])})),o=({basePath:t,metadata:n,filesOffset:i})=>(0,e.isDirectoryMetadata)(n)?Object.fromEntries(Object.entries(n.files).map((([e,n])=>[e,o({basePath:r.join(t,e),metadata:n,filesOffset:i})]))):{path:t,offset:Number(n[0]),size:Number(n[1]),fileOffset:i+8+n[0]},s=({flat:t,header:e,filesOffset:r})=>t?i({metadata:e,basePath:"/",filesOffset:r}):o({metadata:e,basePath:"/",filesOffset:r}),a=(t,e)=>{if("string"!=typeof e)return;if(!(e=e.replace(/^\//,"")))return t;const n=r.basename(e),i=((t,e)=>{let n=t;const i=e.split(r.sep);for(const t of i)"."!==t&&(n=n.files[t]);return n})(t,r.dirname(e));return null===i.files&&(i.files={}),null===i.files[n]&&(i.files[n]=[0,0]),i.files[n]};t.readArchiveHeaderSync=t=>{const e=new DataView(t).getUint32(4,!0),r=new DataView(t.slice(8,16)).getInt32(4,!0);return{header:n.decode(t.slice(16,16+r)),headerSize:e}};const h=t=>t instanceof ArrayBuffer?Promise.resolve(t):new Blob([t]).arrayBuffer();t.extractFile=async(t,e)=>{const r=await h(t),i=new DataView(r).getUint32(4,!0),o=new DataView(r).getUint32(12,!0),s=r.slice(16,o+16),u=n.decode(s),[c,f]=a(u,e);return r.slice(i+Number(c)+8,i+Number(c)+f+8)};const u=(t,e,r,i)=>new Blob(r).arrayBuffer().then((r=>{const o=n.decode(new Uint8Array(r,16,t));return{headerSize:t,filesOffset:e,header:s({flat:i,header:o,filesOffset:e})}}));t.getHeader=async(t,e)=>{const r=new Response(t).body.getReader(),n=async(t=0,i,o,s=[])=>{var a,h;if(i&&t>=i)return await r.cancel(),u(i,o,s,null!==(a=null==e?void 0:e.flat)&&void 0!==a&&a);const{value:c,done:f}=await r.read();return f?u(i,o,s,null!==(h=null==e?void 0:e.flat)&&void 0!==h&&h):n(t+c.byteLength,t+c.byteLength>=16?null!=i?i:new DataView(c.buffer,8,16).getInt32(4,!0):void 0,t+c.byteLength>=16?null!=i?i:new DataView(c.buffer).getUint32(4,!0):void 0,[...s,c])};return n()};t.extractAll=async(e,r)=>{const n=await h(e),{header:i}=await(0,t.getHeader)(n,{flat:null==r?void 0:r.flat});if(null==r?void 0:r.flat)return Object.fromEntries(await Promise.all(i.map((({path:t})=>t)).map((async e=>[e,await(0,t.extractFile)(n,e)]))));const o=async e=>Object.fromEntries(await Promise.all(Object.entries(e).map((async([e,r])=>[e,"object"==typeof r?await o(r):await(0,t.extractFile)(n,r)]))));return o(i)}}(Ae),Ee=n,Ue=e&&e.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),Ie=e&&e.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||Ue(e,t,r)},Object.defineProperty(Ee,"__esModule",{value:!0}),Ie(i,Ee),Ie(nt,Ee),Ie(Ae,Ee);const _e="Checking for updates...",Be="Downloading update package...",xe="Installing update package...";class Te{constructor(t,e,r){this._FS=t,this._IDBFS=e,this._callback=r,this.exists=t=>this._FS.analyzePath(t).exists,this.join=(t,e)=>`${t}/${e}`,this.serverVersion="",this.version="",this.check=async()=>{this._callback({status:_e,progress:0,step:0});const t=this.exists("/content/version.txt")?this._FS.readFile("/content/version.txt",{encoding:"utf8"}):"0";console.log(`Content version: ${t}`);const e=await(await fetch("version.txt")).text();return console.log(`Server version: ${e}`),this._callback({status:_e,progress:100,step:0}),this.version=t,this.serverVersion=e,{version:t,serverVersion:e}},this.install=async()=>{this._callback({status:Be,progress:0,step:1});let t=new XMLHttpRequest;t.open("GET","Content.asar",!0),t.responseType="arraybuffer",t.onprogress=t=>{t.lengthComputable&&this._callback({status:Be,progress:t.loaded/t.total,step:1})};const e=await new Promise(((e,r)=>{t.onload=()=>e(t.response),t.send()}));this._callback({status:xe,progress:0,step:2});const r=await n.extractAll(e,{flat:!0}),i=Object.keys(r).length;let o=0;for(const[t,e]of Object.entries(r)){if(!t)continue;const r=t.toLowerCase().split("/"),n=r[r.length-1],s=r.slice(0,r.length-1).join("/");if(s){const t=s.split("/").filter((t=>""!==t));let e="";for(const r of t)e=e+"/"+r,this.exists(e)||this._FS.mkdir(e)}if(n){const t=this.join(s,n);this.exists(t)&&this._FS.unlink(t),this._FS.writeFile(t,new Uint8Array(e)),this._callback({status:xe,progress:o/i,step:2})}o%15==0&&await new Promise(((t,e)=>{setTimeout((()=>t()),0)})),o++}this._FS.writeFile("/content/version.txt",this.serverVersion),await new Promise(((t,e)=>{this._FS.syncfs(!1,(()=>t()))}))}}}class Pe{static beginShowMessageBox(t,e,r,n,i,o,s){const a={callback:s},h=document.createElement("dialog");h.className="message-dialog",h.innerHTML=`\n            <div class="message-dialog-content-root">\n                <div class="message-dialog-content-container">\n                    <h1 class="message-dialog-title">${e}</h1>\n                    <p class="message-dialog-content">${r}</p>\n                    <div class="message-dialog-button-container">\n                        ${n.map(((t,e)=>`<button id="button-${e}" ${e===i?'autofocus class="message-dialog-button primary"':'class="message-dialog-button"'}>${t}</button>`)).join("")}\n                    </div>\n                </div>\n            </div>\n        `;const u=t=>{void 0===t?a.callback(-1):a.callback(t);h.querySelector(".message-dialog-content-root").addEventListener("animationend",(()=>{h.remove()})),h.classList.add("closing")};n.forEach(((t,e)=>{h.querySelector(`#button-${e}`).addEventListener("click",(()=>{u(e)}))})),h.addEventListener("close",(()=>{u()})),h.addEventListener("cancel",(()=>{u()})),document.body.appendChild(h),h.showModal()}}const Oe=0,Le=1;const Re=document.querySelector("#uno-body"),De=document.querySelector("#progress"),Me=document.querySelector("#status"),ke=document.querySelector("#canvas"),ze=document.querySelector("#tap-to-play"),Ce=()=>{const t=window.innerWidth,e=window.innerHeight,r=Math.min(t/800,e/480);ke.style.width=800*r+"px",ke.style.height=480*r+"px",ke.style.marginTop=(e-480*r)/2+"px"};window.onresize=Ce,Ce();const{setModuleImports:Fe,getAssemblyExports:je,getConfig:Ne}=await t.withDiagnosticTracing(!1).withApplicationArgumentsFromQuery().create(),Ye=t.instance.Module.FS,Ve=t.instance.Module.IDBFS,Ze=await(We=Ye,He=Ve,$e=t=>{Me.textContent=t.status,De.value=t.progress/3+t.step/3},new Promise(((t,e)=>{We.mkdir("/content"),We.mount(He,{},"/content"),We.syncfs(!0,(async()=>{t(new Te(We,He,$e))}))})));var We,He,$e;const{version:Ge,serverVersion:Ke}=await Ze.check();Ge!=Ke&&await Ze.install();const qe=await je("Sonic4Episode1.Wasm.dll"),Xe=new class{constructor(t){this.audioBuffers={},this.volume=1,this.context=new AudioContext,this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination),this.onEnded=this.onEnded.bind(this),this.isGarbage=""===document.createElement("audio").canPlayType("audio/ogg"),this.exports=t}setVolume(t){this.volume=t,this.gainNode.gain.value=t}getVolume(){return this.volume}play(t,e){this.getAudioBuffer(t).then((t=>{this.playQueue(t,e)}))}stop(){this.source&&(this.source.stop(),this.source=null)}preload(t){this.getAudioBuffer(t)}playQueue(t,e){this.source&&(this.source.removeEventListener("ended",this.onEnded),this.source.stop()),this.source=this.context.createBufferSource(),this.source.buffer=t,this.source.connect(this.gainNode),this.source.addEventListener("ended",this.onEnded),void 0!==e&&(console.log("Setting loop",e,t.duration),this.source.loopStart=e,this.source.loopEnd=t.duration,this.source.loop=!0),this.source.start(),this.setState(Le)}getAudioBuffer(t){return t="."+t,this.isGarbage&&(t=t.substring(0,t.length-4)+".m4a"),window.fetch(t).then((t=>t.arrayBuffer())).then((t=>this.context.decodeAudioData(t))).then((e=>(this.audioBuffers[t]=e,e)))}onEnded(t){this.setState(Oe)}setState(t){this.exports.Microsoft.Xna.Framework.Media.WasmMediaPlayer.ChangeState(t)}}(qe);Fe("main.js",{setMainLoop:e=>t.instance.Module.setMainLoop(e),MediaPlayer_GetVolume:Xe.getVolume.bind(Xe),MediaPlayer_SetVolume:Xe.setVolume.bind(Xe),MediaPlayer_Play:t=>Xe.play(t),MediaPlayer_PlayLooped:(t,e)=>Xe.play(t,e),MediaPlayer_LoadSong:t=>Xe.preload(t),MediaPlayer_Stop:Xe.stop.bind(Xe),XmlStorage_GetSaveFile:()=>localStorage.getItem("saveData"),XmlStorage_SetSaveFile:t=>localStorage.setItem("saveData",t),SaveState_GetSaveState:()=>localStorage.getItem("saveState"),SaveState_SetSaveState:t=>localStorage.setItem("saveState",t),SaveState_HasSaveState:()=>null!=localStorage.getItem("saveState"),SaveState_DeleteSaveState:()=>localStorage.removeItem("saveState"),Guide_BeginShowMessageBox:Pe.beginShowMessageBox.bind(Pe),WebBrowserTask_Open:t=>window.open(t,"_blank")}),t.instance.Module.canvas=ke,Re.style.display="none",ze.style.display="none",Ce(),ke.focus(),await t.run();